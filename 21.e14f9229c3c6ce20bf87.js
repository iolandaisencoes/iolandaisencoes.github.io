(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"4zId":function(l,n,e){"use strict";e.r(n);var u=e("CcnG"),o=e("mrSG"),r=e("tct4"),t=e("67Y/"),i=e("ZZ/e"),c=function(){function l(l,n){var e=this;this.afFirestore=l,this.alertController=n,this.allSellers=[],this.sellers=[],this.sellersCollection=this.afFirestore.collection("users",function(l){return l.orderBy("createdAt","desc").where("type","==","seller")}),this.sellersCollection.snapshotChanges().pipe(Object(t.a)(function(l){return l.map(function(l){var n=l.payload.doc.data(),u=l.payload.doc.id;return n.id=u,e.afFirestore.collection("users").doc(u).collection("customers").get().subscribe(function(l){n.customer_count=l.size}),n})})).subscribe(function(l){e.allSellers=l,e.sellers=e.allSellers.slice()})}return l.prototype.ngOnInit=function(){},l.prototype.onSearchChange=function(l){var n=l.detail.value.toLowerCase();this.sellers=this.allSellers.filter(function(l){return l.name.toLowerCase().includes(n)||l.email.toLowerCase().includes(n)||l.dealership_name.toLowerCase().includes(n)})},l.prototype.deleteSeller=function(l){return o.__awaiter(this,void 0,void 0,function(){var n=this;return o.__generator(this,function(e){switch(e.label){case 0:return[4,this.alertController.create({header:"Apagar vendedor",message:"Deseja mesmo apagar "+l.name+"?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"OK",handler:function(){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(n){switch(n.label){case 0:return this.sellersCollection.doc(l.id).delete(),[4,this.alertController.create({header:"Apagar vendedor",message:"Vendedor apagado com sucesso.",buttons:["OK"]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},l}(),a=function(){return function(){}}(),s=e("pMnS"),b=e("oBZk"),d=e("ZYCi"),p=e("Ip0R"),h=e("gIcY"),m=u.nb({encapsulation:0,styles:[[""]],data:{}});function k(l){return u.Fb(0,[(l()(),u.pb(0,0,null,null,1,"div",[["style","padding: 16px;"]],null,null,null,null,null)),(l()(),u.Eb(-1,null,[" N\xe3o h\xe1 vendedores cadastrados. "]))],null,null)}function f(l){return u.Fb(0,[(l()(),u.pb(0,0,null,null,38,"ion-col",[["size","12"],["size-md","6"]],null,null,null,b.I,b.i)),u.ob(1,49152,null,0,i.s,[u.h,u.k],{size:[0,"size"]},null),(l()(),u.pb(2,0,null,0,36,"ion-card",[],null,null,null,b.G,b.d)),u.ob(3,49152,null,0,i.l,[u.h,u.k],null,null),(l()(),u.pb(4,0,null,0,4,"ion-card-header",[],null,null,null,b.E,b.f)),u.ob(5,49152,null,0,i.n,[u.h,u.k],null,null),(l()(),u.pb(6,0,null,0,2,"ion-card-title",[],null,null,null,b.F,b.g)),u.ob(7,49152,null,0,i.p,[u.h,u.k],null,null),(l()(),u.Eb(8,0,["",""])),(l()(),u.pb(9,0,null,0,29,"ion-card-content",[],null,null,null,b.D,b.e)),u.ob(10,49152,null,0,i.m,[u.h,u.k],null,null),(l()(),u.pb(11,0,null,0,1,"b",[],null,null,null,null,null)),(l()(),u.Eb(-1,null,["Nome da concession\xe1ria:"])),(l()(),u.Eb(13,0,[" ",""])),(l()(),u.pb(14,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.pb(15,0,null,0,1,"b",[],null,null,null,null,null)),(l()(),u.Eb(-1,null,["E-mail:"])),(l()(),u.Eb(17,0,[" ",""])),(l()(),u.pb(18,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.pb(19,0,null,0,1,"b",[],null,null,null,null,null)),(l()(),u.Eb(-1,null,["Quantidade de clientes:"])),(l()(),u.Eb(21,0,[" ",""])),(l()(),u.pb(22,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),u.pb(23,0,null,0,15,"div",[["style","display: flex; justify-content: space-between; padding-top: 10px;"]],null,null,null,null,null)),(l()(),u.pb(24,0,null,null,5,"ion-button",[["color","primary"],["routerDirection","root"],["size","small"]],null,[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==u.yb(l,26).onClick()&&o),"click"===n&&(o=!1!==u.yb(l,28).onClick(e)&&o),o},b.B,b.b)),u.ob(25,49152,null,0,i.j,[u.h,u.k],{color:[0,"color"],routerDirection:[1,"routerDirection"],size:[2,"size"]},null),u.ob(26,16384,null,0,d.n,[d.m,d.a,[8,null],u.D,u.k],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),u.Ab(27,{seller:0}),u.ob(28,737280,null,0,i.Hb,[p.g,i.Fb,u.k,d.m,[2,d.n]],{routerDirection:[0,"routerDirection"]},null),(l()(),u.Eb(-1,0,["Clientes "])),(l()(),u.pb(30,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),u.pb(31,0,null,null,4,"ion-button",[["color","primary"],["routerDirection","root"],["size","small"]],null,[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==u.yb(l,33).onClick()&&o),"click"===n&&(o=!1!==u.yb(l,34).onClick(e)&&o),o},b.B,b.b)),u.ob(32,49152,null,0,i.j,[u.h,u.k],{color:[0,"color"],routerDirection:[1,"routerDirection"],size:[2,"size"]},null),u.ob(33,16384,null,0,d.n,[d.m,d.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.ob(34,737280,null,0,i.Hb,[p.g,i.Fb,u.k,d.m,[2,d.n]],{routerDirection:[0,"routerDirection"]},null),(l()(),u.Eb(-1,0,["Editar"])),(l()(),u.pb(36,0,null,null,2,"ion-button",[["color","danger"],["size","small"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.deleteSeller(l.context.$implicit)&&u),u},b.B,b.b)),u.ob(37,49152,null,0,i.j,[u.h,u.k],{color:[0,"color"],size:[1,"size"]},null),(l()(),u.Eb(-1,0,["Apagar"]))],function(l,n){l(n,1,0,"12"),l(n,25,0,"primary","root","small");var e=l(n,27,0,n.context.$implicit.name);l(n,26,0,e,"/sellers/"+n.context.$implicit.id+"/customers"),l(n,28,0,"root"),l(n,32,0,"primary","root","small"),l(n,33,0,"/sellers/"+n.context.$implicit.id+"/edit"),l(n,34,0,"root"),l(n,37,0,"danger","small")},function(l,n){l(n,8,0,n.context.$implicit.name),l(n,13,0,n.context.$implicit.dealership_name),l(n,17,0,n.context.$implicit.email),l(n,21,0,n.context.$implicit.customer_count)})}function g(l){return u.Fb(0,[(l()(),u.pb(0,0,null,null,19,"ion-header",[],null,null,null,b.L,b.l)),u.ob(1,49152,null,0,i.A,[u.h,u.k],null,null),(l()(),u.pb(2,0,null,0,13,"ion-toolbar",[["color","secondary"]],null,null,null,b.Z,b.z)),u.ob(3,49152,null,0,i.Ab,[u.h,u.k],{color:[0,"color"]},null),(l()(),u.pb(4,0,null,0,2,"ion-title",[],null,null,null,b.Y,b.y)),u.ob(5,49152,null,0,i.yb,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Vendedores"])),(l()(),u.pb(7,0,null,0,8,"ion-buttons",[["slot","primary"]],null,null,null,b.C,b.c)),u.ob(8,49152,null,0,i.k,[u.h,u.k],null,null),(l()(),u.pb(9,0,null,0,6,"ion-button",[["color","secondary"],["fill","solid"],["routerDirection","root"],["routerLink","/panel/sellers/create"]],null,[[null,"click"]],function(l,n,e){var o=!0;return"click"===n&&(o=!1!==u.yb(l,11).onClick()&&o),"click"===n&&(o=!1!==u.yb(l,12).onClick(e)&&o),o},b.B,b.b)),u.ob(10,49152,null,0,i.j,[u.h,u.k],{color:[0,"color"],fill:[1,"fill"],routerDirection:[2,"routerDirection"]},null),u.ob(11,16384,null,0,d.n,[d.m,d.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.ob(12,737280,null,0,i.Hb,[p.g,i.Fb,u.k,d.m,[2,d.n]],{routerDirection:[0,"routerDirection"]},null),(l()(),u.Eb(-1,0,[" Adicionar vendedor "])),(l()(),u.pb(14,0,null,0,1,"ion-icon",[["name","add"],["slot","end"]],null,null,null,b.M,b.m)),u.ob(15,49152,null,0,i.B,[u.h,u.k],{name:[0,"name"]},null),(l()(),u.pb(16,0,null,0,3,"ion-searchbar",[["placeholder","Busca de vendedores"],["style","background-color: #0cd1e8;"]],null,[[null,"ionChange"],[null,"ionBlur"]],function(l,n,e){var o=!0,r=l.component;return"ionBlur"===n&&(o=!1!==u.yb(l,19)._handleBlurEvent()&&o),"ionChange"===n&&(o=!1!==u.yb(l,19)._handleInputEvent(e.target.value)&&o),"ionChange"===n&&(o=!1!==r.onSearchChange(e)&&o),o},b.U,b.u)),u.Bb(5120,null,h.k,function(l){return[l]},[i.Jb]),u.ob(18,49152,null,0,i.ib,[u.h,u.k],{placeholder:[0,"placeholder"]},null),u.ob(19,16384,null,0,i.Jb,[u.k],null,null),(l()(),u.pb(20,0,null,null,9,"ion-content",[],null,null,null,b.J,b.j)),u.ob(21,49152,null,0,i.t,[u.h,u.k],null,null),(l()(),u.gb(16777216,null,0,1,null,k)),u.ob(23,16384,null,0,p.i,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.pb(24,0,null,0,5,"ion-grid",[],null,null,null,b.K,b.k)),u.ob(25,49152,null,0,i.z,[u.h,u.k],null,null),(l()(),u.pb(26,0,null,0,3,"ion-row",[],null,null,null,b.T,b.t)),u.ob(27,49152,null,0,i.hb,[u.h,u.k],null,null),(l()(),u.gb(16777216,null,0,1,null,f)),u.ob(29,278528,null,0,p.h,[u.O,u.L,u.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,3,0,"secondary"),l(n,10,0,"secondary","solid","root"),l(n,11,0,"/panel/sellers/create"),l(n,12,0,"root"),l(n,15,0,"add"),l(n,18,0,"Busca de vendedores"),l(n,23,0,0==e.sellers.length),l(n,29,0,e.sellers)},null)}function y(l){return u.Fb(0,[(l()(),u.pb(0,0,null,null,1,"app-index",[],null,null,null,g,m)),u.ob(1,114688,null,0,c,[r.a,i.a],null,null)],function(l,n){l(n,1,0)},null)}var v=u.lb("app-index",c,y,{},{},[]);e.d(n,"IndexPageModuleNgFactory",function(){return w});var w=u.mb(a,[],function(l){return u.vb([u.wb(512,u.j,u.bb,[[8,[s.a,v]],[3,u.j],u.x]),u.wb(4608,p.k,p.j,[u.u,[2,p.r]]),u.wb(4608,h.u,h.u,[]),u.wb(4608,i.b,i.b,[u.z,u.g]),u.wb(4608,i.Eb,i.Eb,[i.b,u.j,u.q,p.c]),u.wb(4608,i.Gb,i.Gb,[i.b,u.j,u.q,p.c]),u.wb(1073742336,p.b,p.b,[]),u.wb(1073742336,h.s,h.s,[]),u.wb(1073742336,h.g,h.g,[]),u.wb(1073742336,i.Cb,i.Cb,[]),u.wb(1073742336,d.o,d.o,[[2,d.u],[2,d.m]]),u.wb(1073742336,a,a,[]),u.wb(1024,d.k,function(){return[[{path:"",component:c}]]},[])])})}}]);